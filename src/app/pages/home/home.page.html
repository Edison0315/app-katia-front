<ion-header>
  <ion-toolbar>
    <ion-button slot="start" [routerLink]="['/profile']" fill="clear">
      <ion-icon class="custom-size" name="person-circle-outline"></ion-icon>
    </ion-button>
    <div class="header-img-container">
      <ion-img slot="start" src="assets/logo.png"></ion-img>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <h4>Mis metricas de salud</h4>
  
  <ion-row>
    <ion-col size="6" *ngFor="let metric of metrics; let i = index">

      <ion-card class="main-card-metrics">
        <ion-card-header>
          <ion-card-subtitle>
            <a href="javascript:;" (click)="showDetail(i)">{{ metric.title }}</a>
          </ion-card-subtitle>

          <div class="div-h5">
            <ion-card-title>
              <ng-container *ngIf="metric.checked === 0">
                <h5>
                  Controlado
                  <ion-icon class="icon-check" name="thumbs-up-outline" color="success"></ion-icon>  
                </h5>
              </ng-container>
              
              <ng-container *ngIf="metric.checked === 1">
                <h5>
                  Descontrolado
                  <ion-icon name="thumbs-down-outline" color="danger"></ion-icon>  
                </h5>
              </ng-container>
            </ion-card-title>
          </div>

        </ion-card-header>
      </ion-card>
    </ion-col>

  </ion-row>

  <ion-modal [isOpen]="isModalOpen">
    <ng-template>

      <ion-header>
        <ion-toolbar>
          <ion-title>{{ metric_selected.title }}</ion-title>
          <ion-buttons slot="start">
            <ion-button (click)="closeModal()">
              <ion-icon slot="icon-only" name="close-outline"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>

      <ion-content class="ion-padding">
        
        <ion-card>

          <img src="{{ metric_util_selected.url }}" alt="Blood">

          <ion-card-header>

            <ng-container *ngIf="metric_selected.value">
              <ion-card-title>Mi métrica actual: {{ metric_selected.value }} </ion-card-title>
            </ng-container>

            <ng-container *ngIf="!metric_selected.value">
              <ion-card-title>Mi métrica actual: {{ (!metric_selected.checked)? 'Controlado' : 'Descontrolado' }} </ion-card-title>
            </ng-container>

            <ng-container *ngIf="metric_selected.value">
              <ion-card-subtitle>
                <ion-icon name="disc-outline"></ion-icon>
                Meta: {{ metric_selected.goal }}
              </ion-card-subtitle>
              
              <ion-card-subtitle>
                <ion-icon name="calendar-outline"></ion-icon>
                Fecha de toma: {{ metric_selected.date }}
              </ion-card-subtitle>
            </ng-container>


          </ion-card-header>
      
        </ion-card>

      </ion-content>
    </ng-template>
  </ion-modal>

  <h4>Mis datos clinicos</h4>

  <ion-row>

    <ion-col size="3">
      <ion-button href="/medicines" color="default">
        <ion-icon class="icon-check" name="reader-outline" color="success"></ion-icon>  
      </ion-button>
      <p> Medicinas </p>
    </ion-col>

    <ion-col size="3">
      <ion-button href="/comorbidities" color="default">
        <ion-icon class="icon-check" name="fitness-outline" color="success"></ion-icon>  
      </ion-button>
      <p> Comorbil.. </p>
    </ion-col>

    <ion-col size="3">
      <ion-button href="/alerts" color="default">
        <ion-icon class="icon-check" name="warning-outline" color="success"></ion-icon>  
      </ion-button>
      <p> Alertas </p>
    </ion-col>

    <ion-col size="3">
      <ion-button href="/files" color="default">
        <ion-icon class="icon-check" name="attach-outline" color="success"></ion-icon>  
      </ion-button>
      <p> Adjuntos </p>
    </ion-col>

  </ion-row>

</ion-content>

<ion-footer>
  <ion-row>
    <ion-col size="4" [routerLink]="['/home']">
      <div class="div-tabs active">
        <ion-icon name="home-outline"></ion-icon>
        <br>
        <ion-label class="fs-13">Inicio</ion-label>
      </div>
    </ion-col>
    <ion-col size="4" [routerLink]="['/care-plan']">
      <div class="div-tabs">
        <ion-icon name="calendar-number-outline"></ion-icon>
        <br>
        <ion-label class="fs-13">Plan de cuidado</ion-label>
      </div>
    </ion-col>
    <ion-col size="4" [routerLink]="['/news']">
      <div class="div-tabs">
        <ion-icon name="megaphone-outline"></ion-icon>
        <br>
        <ion-label class="fs-13">Novedades</ion-label>
      </div>
    </ion-col>
  </ion-row>
</ion-footer>